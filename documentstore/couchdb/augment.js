{"_id":"_design/augment","_rev":"9-a4496bae10e15c2e89967afc0c41fe96","views":{"no-doi":{"reduce":"_sum","map":"//----------------------------------------------------------------------------------------\n// START COUCHDB VIEW\n//----------------------------------------------------------------------------------------\n\n\n//----------------------------------------------------------------------------------------\nfunction csl(doc) {\n  if (doc.message) {\n\n    // Check for DOI\n    if (!doc.message.DOI) {\n         if (doc['message-format'] === 'application/vnd.citationstyles.csl+json') {\n\t\t       emit('csl', 1);\n         }\n    }\n  }\n}\n\n//----------------------------------------------------------------------------------------\nfunction reference(doc) {\n  if (doc.message) {\n    if (!doc.message.DOI) {\n      emit('reference', 1);\n    }    \n  }\n}\n\n//----------------------------------------------------------------------------------------\nfunction zoobank(doc) {\n  if (doc.message) {\n    if (!doc.message.doi) {\n      emit('zoobank', 1);\n    }    \n  }\n}\n\n//----------------------------------------------------------------------------------------\nfunction (doc) {\n  if (doc['message-format']) {\n\n    // ORCID work\n    if (doc['message-format'] === 'application/vnd.citationstyles.csl+json') {\n      csl(doc);\n    }\n\n    // CrossRef\n    if (doc['message-format'] === 'application/vnd.crossref-api-message+json') {\n      csl(doc);\n    }\n    \n    // Cited reference (e.g., from CrossRef CSL)\n    if (doc['message-format'] === 'application/vnd.crossref-citation+json') {\n      reference(doc);\n    }\n   \n    \n    // Zoobank\n    if (doc['message-format'] === 'application/vnd.zoobank+json') {\n     zoobank(doc);\n    }\n\n  }\n}\n\n// END COUCHDB VIEW"},"no-doi-modified":{"map":"//----------------------------------------------------------------------------------------\n// START COUCHDB VIEW\n//----------------------------------------------------------------------------------------\n\n\n//----------------------------------------------------------------------------------------\nfunction csl(doc) {\n  if (doc.message) {\n\n    // Check for DOI\n    if (!doc.message.DOI) {\n         if (doc['message-format'] === 'application/vnd.citationstyles.csl+json') {\n\t\t       emit(doc['message-modified'], doc._id);\n         }\n    }\n  }\n}\n\n//----------------------------------------------------------------------------------------\nfunction reference(doc) {\n  if (doc.message) {\n    if (!doc.message.DOI) {\n      emit(doc['message-modified'], doc._id);\n    }    \n  }\n}\n\n//----------------------------------------------------------------------------------------\nfunction zoobank(doc) {\n  if (doc.message) {\n    if (!doc.message.doi) {\n      emit(doc['message-modified'], doc._id);\n    }    \n  }\n}\n\n//----------------------------------------------------------------------------------------\nfunction (doc) {\n  if (doc['message-format']) {\n\n    // ORCID work\n    if (doc['message-format'] === 'application/vnd.citationstyles.csl+json') {\n      csl(doc);\n    }\n\n    // CrossRef\n    if (doc['message-format'] === 'application/vnd.crossref-api-message+json') {\n      csl(doc);\n    }\n    \n    // Cited reference (e.g., from CrossRef CSL)\n    if (doc['message-format'] === 'application/vnd.crossref-citation+json') {\n      reference(doc);\n    }\n    \n    \n    // Zoobank\n    if (doc['message-format'] === 'application/vnd.zoobank+json') {\n     zoobank(doc);\n    }\n\n  }\n}\n\n// END COUCHDB VIEW"}},"language":"javascript"}
